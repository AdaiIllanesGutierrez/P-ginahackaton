
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orden Familiar Final</title>
    <style>
        :root { --primary: #2e7d32; --secondary: #1565c0; --accent: #d32f2f; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #eef2f3; padding: 10px; margin: 0; }
        .container { max-width: 600px; margin: auto; background: white; padding: 15px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2, h3 { text-align: center; color: var(--primary); margin-bottom: 10px; }
        
        .setup-section { background: #f1f8e9; padding: 10px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #c8e6c9; }
        .config-row { display: flex; gap: 5px; margin-bottom: 8px; }
        .config-row input { flex-grow: 1; margin-bottom: 0; }
        .config-row button { width: auto; padding: 5px 15px; margin-bottom: 0; background: #4caf50; color: white; }

        label { display: block; margin-bottom: 3px; font-weight: bold; font-size: 0.85em; color: #555; }
        select, input { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; font-size: 16px; }
        
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .btn-order { background: var(--primary); color: white; font-size: 1.1em; margin-bottom: 10px; }
        .btn-summary { background: var(--secondary); color: white; }
        .btn-reset { background: #9e9e9e; color: white; margin-top: 20px; font-size: 0.9em; }

        .item { background: #fff; border-left: 5px solid var(--primary); padding: 10px; margin: 8px 0; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: relative; }
        .item-delete { position: absolute; right: 10px; top: 10px; color: var(--accent); cursor: pointer; font-weight: bold; padding: 5px; }
        
        #summary { display: none; background: #fff8e1; border: 2px solid #ffb300; padding: 15px; border-radius: 10px; margin-top: 20px; }
        .summary-line { padding: 8px 0; border-bottom: 1px solid #ffe082; }
    </style>
</head>
<body>

<div class="container">
    <h2>üç¥ Pedido Familiar</h2>

    <div class="setup-section">
        <label>1. Agregar Plato Nuevo:</label>
        <div class="config-row">
            <input type="text" id="newDish" placeholder="Ej: Arroz con Fideo Broaster">
            <button onclick="addItem('menu', 'newDish', 'dishSelect')">+</button>
        </div>
        
        <label style="margin-top:10px">2. Agregar Caracter√≠stica Nueva:</label>
        <div class="config-row">
            <input type="text" id="newFeature" placeholder="Ej: Sin presa / Solo Ala">
            <button onclick="addItem('features', 'newFeature', 'featureSelect')">+</button>
        </div>
    </div>

    <div class="order-section">
        <label>¬øQui√©n pide?</label>
        <select id="personSelect"></select>

        <label>Plato:</label>
        <select id="dishSelect"><option value="">-- Selecciona Plato --</option></select>

        <label>Caracter√≠stica:</label>
        <select id="featureSelect"><option value="Normal">Normal / Est√°ndar</option></select>

        <button class="btn-order" onclick="addOrder()">‚úÖ Anotar Pedido</button>
    </div>

    <div id="orderList"></div>

    <button class="btn-summary" onclick="showSummary()">üìä Resumen para el Mesero</button>

    <div id="summary">
        <h3 style="color:#f57c00">Lista para el Mesero:</h3>
        <div id="summaryContent"></div>
    </div>

    <button class="btn-reset" onclick="confirmReset()">üóëÔ∏è Borrar Todo y Empezar de Nuevo</button>
</div>

<script>
    const persons = [
        "Mami Nelia", "nai", "blady", "valentina", "Henry", "Gely", "Ada", "Dayli", 
        "Antonella", "Geler", "Martha", "Getseman√≠", "Guti", "Joaquin", "Kiara", 
        "Nelber", "Liz", "Elner", "Shanel", "Nelbercito"
    ];

    let orders = [];
    let menu = [];
    let features = ["Normal"];

    // Cargar Personas
    const pSelect = document.getElementById('personSelect');
    persons.forEach(p => {
        let opt = document.createElement('option');
        opt.value = p; opt.innerText = p;
        pSelect.appendChild(opt);
    });

    // Funci√≥n para agregar items a los combos (Platos o Caracter√≠sticas)
    function addItem(type, inputId, selectId) {
        const input = document.getElementById(inputId);
        const val = input.value.trim();
        if(!val) return;

        if(type === 'menu') menu.push(val);
        else features.push(val);

        updateSelect(selectId, type === 'menu' ? menu : features);
        input.value = '';
    }

    function updateSelect(id, data) {
        const sel = document.getElementById(id);
        const placeholder = id === 'dishSelect' ? '-- Selecciona Plato --' : 'Normal / Est√°ndar';
        sel.innerHTML = `<option value="${id === 'featureSelect' ? 'Normal' : ''}">${placeholder}</option>`;
        data.forEach(item => {
            if(item === "Normal" && id === 'featureSelect') return;
            let opt = document.createElement('option');
            opt.value = item; opt.innerText = item;
            sel.appendChild(opt);
        });
    }

    function addOrder() {
        const person = document.getElementById('personSelect').value;
        const dish = document.getElementById('dishSelect').value;
        const feature = document.getElementById('featureSelect').value;

        if(!dish) { alert("¬°Selecciona un plato!"); return; }

        orders.push({ person, dish, feature });
        renderOrders();
    }

    function renderOrders() {
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        orders.forEach((o, i) => {
            list.innerHTML += `
                <div class="item">
                    <strong>${o.person}</strong> pidi√≥: <br>
                    ${o.dish} <small>(${o.feature})</small>
                    <span class="item-delete" onclick="deleteOrder(${i})">‚úï</span>
                </div>`;
        });
    }

    function deleteOrder(i) {
        orders.splice(i, 1);
        renderOrders();
    }

    function showSummary() {
        if(orders.length === 0) return;
        const content = document.getElementById('summaryContent');
        const box = document.getElementById('summary');
        content.innerHTML = '';

        const grouped = {};

        orders.forEach(o => {
            // Agrupamos por combinaci√≥n exacta de Plato + Caracter√≠stica
            const key = `${o.dish.toUpperCase()} [${o.feature}]`;
            if(!grouped[key]) {
                grouped[key] = { count: 0, owners: [] };
            }
            grouped[key].count++;
            grouped[key].owners.push(o.person);
        });

        for(let k in grouped) {
            content.innerHTML += `
                <div class="summary-line">
                    <strong>${grouped[k].count}x ${k}</strong>
                    <br><small>Para: ${grouped[k].owners.join(', ')}</small>
                </div>`;
        }
        box.style.display = 'block';
        box.scrollIntoView({behavior: "smooth"});
    }

    function confirmReset() {
        if(confirm("¬øSeguro que quieres borrar todos los pedidos actuales?")) {
            orders = [];
            renderOrders();
            document.getElementById('summary').style.display = 'none';
        }
    }
</script>

</body>
</html>
